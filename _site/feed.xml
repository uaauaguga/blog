<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-01-23T10:58:50+08:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Jin’s Post</title><subtitle>Notes &amp; blogs</subtitle><entry><title type="html">Notes on Markov Random Field</title><link href="http://localhost:4000/jekyll/update/2023/01/22/notes-on-MRF.html" rel="alternate" type="text/html" title="Notes on Markov Random Field" /><published>2023-01-22T10:37:51+08:00</published><updated>2023-01-22T10:37:51+08:00</updated><id>http://localhost:4000/jekyll/update/2023/01/22/notes-on-MRF</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2023/01/22/notes-on-MRF.html">&lt;h1 id=&quot;notes-on-markov-random-field&quot;&gt;Notes on Markov Random Field&lt;/h1&gt;

&lt;h2 id=&quot;definition-and-parameterization&quot;&gt;Definition and parameterization&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Consider random variables \(X=(X_1,X_2,...,X_n)\)&lt;/li&gt;
  &lt;li&gt;These random variables have conditional dependency defined by a graph \(G\)&lt;/li&gt;
  &lt;li&gt;The graph \(G\) have \(m\) cliques (fully connected subgraphs), denoted as \(D_1,...,D_m\)&lt;/li&gt;
  &lt;li&gt;Then distribution of the random variable can be expressed as product of clique potentials:&lt;/li&gt;
&lt;/ul&gt;

\[\large{P(X)=\frac{\prod_{i=1}^{m}\phi_{i}(D_i)}{Z}}\]

&lt;ul&gt;
  &lt;li&gt;\(\phi_{i}(D_i)\) is potential of clique \(D_i\)&lt;/li&gt;
  &lt;li&gt;\(Z\) is called partition function&lt;/li&gt;
&lt;/ul&gt;

\[Z = \sum_{X}\prod_{i=1}^{m}\phi_{i}(D_i)\]

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Calculation of \(Z\) is generally computationally intractable&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;It can also expressed as an log-linear model&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

\[\large{P(X)=\frac{1}{Z}\exp{[-\sum^{k}_{i}w_{i}f_{i}(D_{i})]}}\]

&lt;ul&gt;
  &lt;li&gt;\(w_{i}\) are weights&lt;/li&gt;
  &lt;li&gt;\(f_{i}(D_{i})\) is the feature of complete subgraph \(D_{i}\)&lt;/li&gt;
  &lt;li&gt;\(Z\) is the normalization constant, or partition function&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;image-denoising&quot;&gt;Image denoising&lt;/h2&gt;

&lt;h2 id=&quot;image-segmentation&quot;&gt;Image segmentation&lt;/h2&gt;

&lt;h2 id=&quot;ising--potts-model-and-protein--rna-contact-prediction&quot;&gt;Ising / Potts model and protein / RNA contact prediction&lt;/h2&gt;

&lt;h3 id=&quot;ising-model&quot;&gt;Ising model&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Random variable \(X_i\) takes value of either 1 or -1&lt;/li&gt;
  &lt;li&gt;The energy of edge (i,j) is&lt;/li&gt;
&lt;/ul&gt;

\[\epsilon_{i,j}(x_i,x_j)=w_{i,j}x_{i}x_{j}\]

&lt;ul&gt;
  &lt;li&gt;The energy of variable \(X_i\) is&lt;/li&gt;
&lt;/ul&gt;

\[u_{i}x_{i}\]

&lt;ul&gt;
  &lt;li&gt;The distribution takes the form&lt;/li&gt;
&lt;/ul&gt;

\[P(X_1,...,X_n) = \frac{1}{Z}\exp(-\sum_{i&amp;lt;j}w_{i,j}x_{i}x_{j}-\sum_{i}u_{i}x_{i})\]

&lt;h3 id=&quot;potts-model-and-protein--rna-structure-modeling&quot;&gt;Potts model and protein / RNA structure modeling&lt;/h3&gt;

&lt;h2 id=&quot;conditional-random-field&quot;&gt;Conditional random field&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Direct modeling the conditional distribution \(P(y\|X)\), that is given observations of a subset of variables \(X\), modeling the distribution remaining variables \(Y\) conditioned on \(X\)&lt;/li&gt;
  &lt;li&gt;Combining the advantages of discriminative classification and graphical modeling&lt;/li&gt;
  &lt;li&gt;Combining the ability to compactly model multivariate outputs y with the ability to leverage
a large number of input features x for prediction&lt;/li&gt;
&lt;/ul&gt;

\[\large{P(Y|X)=\frac{\prod_{i=1}^{m}\phi_{i}(D_i)}{Z}}\]

\[Z = \sum_{Y}\prod_{i=1}^{m}\phi_{i}(D_i)\]

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Note \(X\) is not involved in calculation of partition function&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Logistic regression is a special case of conditional random field&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;/images/2023-01-23-logistic-regression.png&quot; alt=&quot;image&quot; width=&quot;30%&quot; /&gt;&lt;/p&gt;

\[\large{
    P(y_i|X) = \frac{\exp{(\beta_{y_{i}0}x_0+\sum_{1}^{m}\beta_{y_{i}k}x_k)}}{\sum_{y_{i}}\exp{(\beta_{y_{i}0}x_0+\sum_{1}^{m}\beta_{y_{i}k}x_k)}}
    = \frac{1}{Z}\exp{-\sum_{0}^{k}w_{y_{i}k}f_{k}(y,X)}
    }\]

&lt;ul&gt;
  &lt;li&gt;It takes a form same as log-linear model of markov random field&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;named-entity-recognition&quot;&gt;Named entity recognition&lt;/h2&gt;

&lt;h2 id=&quot;reference&quot;&gt;Reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://homepages.inf.ed.ac.uk/csutton/publications/crftut-fnt.pdf&quot;&gt;An Introduction to Conditional Random Fields&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Notes on Markov Random Field</summary></entry><entry><title type="html">Notes on Taxonomy</title><link href="http://localhost:4000/jekyll/update/2022/09/03/notes-on-taxonomy.html" rel="alternate" type="text/html" title="Notes on Taxonomy" /><published>2022-09-03T10:39:16+08:00</published><updated>2022-09-03T10:39:16+08:00</updated><id>http://localhost:4000/jekyll/update/2022/09/03/notes-on-taxonomy</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/09/03/notes-on-taxonomy.html">&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Download mapping between genbank id and taxonomy &lt;a href=&quot;ftp://ftp.ncbi.nih.gov/pub/taxonomy/accession2taxid&quot;&gt;ftp://ftp.ncbi.nih.gov/pub/taxonomy/accession2taxid&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Extract taxnomy information from blast database&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;blastdbcmd &lt;span class=&quot;nt&quot;&gt;-entry_batch&lt;/span&gt; seq_ids.txt &lt;span class=&quot;nt&quot;&gt;-db&lt;/span&gt; nt &lt;span class=&quot;nt&quot;&gt;-dbtype&lt;/span&gt; nucl &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; taxo.info &lt;span class=&quot;nt&quot;&gt;-outfmt&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%a %i %T %L&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# AC189400.2 gb|AC189400.2| 51351 Chinese cabbage&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %a means accession&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %g means gi&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %l means sequence length&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %T means taxid&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %X means leaf-node taxids (what does this mean?)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %i means sequence id&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %L means common taxonomic name&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# %C means common taxonomic names for leaf-node taxids&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;A very useful module in &lt;a href=&quot;http://etetoolkit.org/&quot;&gt;ete&lt;/a&gt; toolkits &lt;a href=&quot;http://etetoolkit.org/docs/2.3/reference/reference_ncbi.html&quot;&gt;http://etetoolkit.org/docs/2.3/reference/reference_ncbi.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env python
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pickle&lt;/span&gt; 
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ete3&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NCBITaxa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Tree&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# taxo id of species you want to extract
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;species_ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;taxo-ids-unique.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;species_ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;species_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;plant-tree.pkl&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Load ncbi taxo tree ...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ncbi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NCBITaxa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Get plant subtree ...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# get descendants of a nodes
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;plant_taxo_ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ncbi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_descendant_taxa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;58024&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ncbi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_topology&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plant_taxo_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intermediate_nodes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Saving subtree to pickle file .&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;plant-tree.pkl&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;pickle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;plant-tree.pkl&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;used_nodes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;genera_counter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# traverse the tree to extract desired nodes
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;traverse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;species&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;species_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sci_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;genus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sci_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;genus&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;genera_counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;genera_counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;genus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;genera_counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;genus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;genera_counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;genus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;used_nodes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# only keep a subset of nodes and corresponding topology in extracted tree
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prune&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;used_nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://bioinf.shenwei.me/taxonkit/&quot;&gt;https://bioinf.shenwei.me/taxonkit/&lt;/a&gt; seems worth a try&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;also check this one &lt;a href=&quot;https://github.com/apcamargo/taxopy&quot;&gt;https://github.com/apcamargo/taxopy&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Visualization of taxonomy tree
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://itol.embl.de/&quot;&gt;itol&lt;/a&gt;: interactive tree of life, a web tool&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://yulab-smu.top/treedata-book/&quot;&gt;ggtree&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;genome to phylogenetics tree
    &lt;ul&gt;
      &lt;li&gt;https://github.com/AstrobioMike/GToTree&lt;/li&gt;
      &lt;li&gt;https://github.com/lskatz/mashtree&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Download mapping between genbank id and taxonomy ftp://ftp.ncbi.nih.gov/pub/taxonomy/accession2taxid</summary></entry><entry><title type="html">Notes on distributed file system</title><link href="http://localhost:4000/jekyll/update/2022/08/30/distributed-file-systems.html" rel="alternate" type="text/html" title="Notes on distributed file system" /><published>2022-08-30T19:52:08+08:00</published><updated>2022-08-30T19:52:08+08:00</updated><id>http://localhost:4000/jekyll/update/2022/08/30/distributed-file-systems</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/08/30/distributed-file-systems.html">&lt;h1 id=&quot;lustre&quot;&gt;Lustre&lt;/h1&gt;

&lt;h2 id=&quot;features&quot;&gt;Features&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;See &lt;a href=&quot;https://lustre.ornl.gov/lustre101-courses/content/C1/L1/LustreIntro.pdf&quot;&gt;https://lustre.ornl.gov/lustre101-courses/content/C1/L1/LustreIntro.pdf&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Lustre server: servers for parallel storage
    &lt;ul&gt;
      &lt;li&gt;Object Storage Servers (OSS): Handles I/O requests for file data&lt;/li&gt;
      &lt;li&gt;Object Storage Targets (OST): Block device used by OSS to store file data. Each OSS usually serves multiple OSTs&lt;/li&gt;
      &lt;li&gt;Metadata Storage Servers (MDS): Manages filenames and directories, file stripe locations, locking, ACLs, etc&lt;/li&gt;
      &lt;li&gt;Metadata Storage Targets (MDT):  Block device used by MDS to store metadata information&lt;/li&gt;
      &lt;li&gt;MGS – Management server. Stores configuration information for one or more Lustre file systems.&lt;/li&gt;
      &lt;li&gt;MGT - Block device used by MGS for data storage&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Lustre clients: Compute Nodes that access data from lustre server&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://wiki.lustre.org/Main_Page&lt;/li&gt;
  &lt;li&gt;https://lustre.ornl.gov/lustre101-courses/&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Lustre</summary></entry><entry><title type="html">Tricks on file formating</title><link href="http://localhost:4000/jekyll/update/2022/06/17/tricks-in-file-format.html" rel="alternate" type="text/html" title="Tricks on file formating" /><published>2022-06-17T16:21:48+08:00</published><updated>2022-06-17T16:21:48+08:00</updated><id>http://localhost:4000/jekyll/update/2022/06/17/tricks-in-file-format</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/06/17/tricks-in-file-format.html">&lt;h2 id=&quot;manipulate-fasta-file&quot;&gt;Manipulate fasta file&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/lh3/seqtk&quot;&gt;https://github.com/lh3/seqtk&lt;/a&gt; is extremely useful&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Filter contigs shorter than 1000nt:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;seqtk &lt;span class=&quot;nb&quot;&gt;seq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; 1000 contigs.fa &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; contigs.gt1000.fa
&lt;span class=&quot;c&quot;&gt;# other functions include sampling sequence, etc.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Convert one line fasta to multiline fasta&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# reformat.sh provided in bbtools&lt;/span&gt;
reformat.sh &lt;span class=&quot;nv&quot;&gt;fastawrap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;70 &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;input.fa &lt;span class=&quot;nv&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;output.fa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;download-refseq-sequences&quot;&gt;Download refseq sequences&lt;/h2&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env python
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Bio&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Entrez&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;argparse&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logging&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argparse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ArgumentParser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Download genebank sequence'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'--query'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'-q'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;help&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Genebank id for download&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'--fasta'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-f'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;help&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Path to write the downloaded data&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse_args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basicConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'[&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%(asctime)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s] [&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%(levelname)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s] &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%(name)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%(message)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getLogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Retrieve sequence'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Entrez&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;xxx&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fasta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Start retriving {} from ncbi nucleotide in fasta format ...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Entrez&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;efetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;nucleotide&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rettype&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fasta&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;retmode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Done.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error retriving {}, skip ...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Manipulate fasta file</summary></entry><entry><title type="html">Notes on Metagenomics</title><link href="http://localhost:4000/jekyll/update/2022/06/17/notes-on-metagenomics.html" rel="alternate" type="text/html" title="Notes on Metagenomics" /><published>2022-06-17T15:15:41+08:00</published><updated>2022-06-17T15:15:41+08:00</updated><id>http://localhost:4000/jekyll/update/2022/06/17/notes-on-metagenomics</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/06/17/notes-on-metagenomics.html">&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Estimate abundance of different microbes from amplicon sequencing or shutgun sequencing&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;alignment based methods vs. kmer based methods
    &lt;ul&gt;
      &lt;li&gt;metaphlan&lt;/li&gt;
      &lt;li&gt;kraken&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://huttenhower.sph.harvard.edu/metaphlan2/&quot;&gt;metaphlan2&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;kraken2&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;marker gene based methods vs. marker gene independent methods
    &lt;ul&gt;
      &lt;li&gt;metaphylan2, krakenunique&lt;/li&gt;
      &lt;li&gt;kraken2&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;nucleotide level analysis vs. protein level analysis
    &lt;ul&gt;
      &lt;li&gt;kraken&lt;/li&gt;
      &lt;li&gt;kraken2&lt;/li&gt;
      &lt;li&gt;Kaiju&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;benchmark study&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;assembly&quot;&gt;Assembly&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;metaspades: memory intesive&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tools-for-binning&quot;&gt;Tools for binning&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://bitbucket.org/berkeleylab/metabat/src/master/&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;strategy-for-removing-contaminations&quot;&gt;Strategy for removing contaminations&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;2014, &lt;em&gt;BMC Biology&lt;/em&gt;, &lt;a href=&quot;https://bmcbiol.biomedcentral.com/articles/10.1186/s12915-014-0087-z&quot;&gt;Reagent and laboratory contamination can critically impact sequence-based microbiome analyses&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;2019, &lt;em&gt;Trends in Microbiology&lt;/em&gt;, &lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S0966842X18302531&quot;&gt;Contamination in Low Microbial Biomass Microbiome Studies: Issues and Recommendations&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;2019, &lt;em&gt;Plos Computational Biology&lt;/em&gt;, &lt;a href=&quot;https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1006967&quot;&gt;Recentrifuge: Robust comparative analysis and contamination removal for metagenomics&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;genome-similarity&quot;&gt;Genome similarity&lt;/h3&gt;

&lt;p&gt;@@ -55,25 +64,31 @@ categories: jekyll update&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/UniFrac&quot;&gt;unifrac distance&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;weighted unifrac distance&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;PCoA Analysis&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;community-analysis-based-on-pairwise-distance&quot;&gt;Community analysis based on pairwise distance&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Multidimensional_scaling&quot;&gt;PCoA&lt;/a&gt; Analysis
    &lt;ul&gt;
      &lt;li&gt;PCoA (principle coordinate analysis) and MDS (multi-dimesional scaling) are essentially the same thing (but this seems the term MDS is seldom used by the microbiology community …)&lt;/li&gt;
      &lt;li&gt;project each sample in a distance matrix to a low dimensional space, attempt to preserve the pairwise distances&lt;/li&gt;
      &lt;li&gt;See
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Multidimensional_scaling&quot;&gt;https://en.wikipedia.org/wiki/Multidimensional_scaling&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;https://www.stat.pitt.edu/sungkyu/course/2221Fall13/lec8_mds_combined.pdf&quot;&gt;https://www.stat.pitt.edu/sungkyu/course/2221Fall13/lec8_mds_combined.pdf&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;https://repository.upenn.edu/cgi/viewcontent.cgi?article=1000&amp;amp;context=cis_papers&quot;&gt;https://repository.upenn.edu/cgi/viewcontent.cgi?article=1000&amp;amp;context=cis_papers&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Permutational_analysis_of_variance&quot;&gt;permanova analysis&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Permutational_analysis_of_variance&quot;&gt;permanova&lt;/a&gt; analysis
    &lt;ul&gt;
      &lt;li&gt;For a given grouping (real grouping or shuffled grouping), a pseudo F statistics can be calculated&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;P&lt;/em&gt; value can be calculated by shuffling group labels&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;differential-analysis&quot;&gt;Differential analysis&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;2020, &lt;em&gt;Genome Biology&lt;/em&gt;, &lt;a href=&quot;https://genomebiology.biomedcentral.com/articles/10.1186/s13059-020-02104-1&quot;&gt;Assessment of statistical methods from single cell, bulk RNA-seq, and metagenomics applied to microbiome data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;functional-annotation&quot;&gt;Functional annotation&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;eggnog: &lt;a href=&quot;http://eggnog.embl.de/&quot;&gt;http://eggnog.embl.de/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;visualization&quot;&gt;Visualization&lt;/h3&gt;

&lt;h3 id=&quot;genome-annotation&quot;&gt;Genome annotation&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;CDS prediction for prokaryotes&lt;/li&gt;
  &lt;li&gt;CDS prediction for eukaryotes&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;useful-resources&quot;&gt;Useful resources&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/ngs-docs/2017-ucsc-metagenomics&quot;&gt;https://github.com/ngs-docs/2017-ucsc-metagenomics&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/GenomicsAotearoa/metagenomics_summer_school&quot;&gt;https://github.com/GenomicsAotearoa/metagenomics_summer_school&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Finn-Lab/MAG_Snakemake_wf&quot;&gt;https://github.com/Finn-Lab/MAG_Snakemake_wf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Estimate abundance of different microbes from amplicon sequencing or shutgun sequencing</summary></entry><entry><title type="html">Sequence Motif Modeling Related</title><link href="http://localhost:4000/jekyll/update/2022/03/12/sequence-motif-discovery.html" rel="alternate" type="text/html" title="Sequence Motif Modeling Related" /><published>2022-03-12T09:34:19+08:00</published><updated>2022-03-12T09:34:19+08:00</updated><id>http://localhost:4000/jekyll/update/2022/03/12/sequence-motif-discovery</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/03/12/sequence-motif-discovery.html">&lt;h2 id=&quot;the-meme-suite&quot;&gt;The MEME suite&lt;/h2&gt;

&lt;h2 id=&quot;motif-format-conversion&quot;&gt;Motif format conversion&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Extract motif from meme’s output&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;meme-get-motif &lt;span class=&quot;nt&quot;&gt;-all&lt;/span&gt; meme.txt &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; motifs.meme
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;resources-for-rbp-binding-preference&quot;&gt;Resources for RBP binding preference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://attract.cnic.es/index&quot;&gt;attract&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://rbpdb.ccbr.utoronto.ca/download.php&quot;&gt;rbpdb&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://cisbp-rna.ccbr.utoronto.ca/&quot;&gt;CISBP-RNA&lt;/a&gt; database&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">The MEME suite</summary></entry><entry><title type="html">Notes on audio track separation</title><link href="http://localhost:4000/jekyll/update/2022/03/08/notes-on-audio-track-separation.html" rel="alternate" type="text/html" title="Notes on audio track separation" /><published>2022-03-08T13:26:32+08:00</published><updated>2022-03-08T13:26:32+08:00</updated><id>http://localhost:4000/jekyll/update/2022/03/08/notes-on-audio-track-separation</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/03/08/notes-on-audio-track-separation.html">&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/librosa/librosa&quot;&gt;librosa&lt;/a&gt;, A python package for music and audio analysis.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/deezer/spleeter&quot;&gt;spleeter&lt;/a&gt;, Deezer source separation library with pretrained models written in Python and uses Tensorflow&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/sigsep/open-unmix-pytorch&quot;&gt;https://github.com/sigsep/open-unmix-pytorch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/AIcrowd/music-demixing-challenge-starter-kit&quot;&gt;https://github.com/AIcrowd/music-demixing-challenge-starter-kit&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sigsep.github.io/datasets/musdb.html#sisec-2018-evaluation-campaign&quot;&gt;https://sigsep.github.io/datasets/musdb.html#sisec-2018-evaluation-campaign&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Resources</summary></entry><entry><title type="html">Notes on ffmpeg</title><link href="http://localhost:4000/jekyll/update/2022/02/03/notes-on-ffmpeg.html" rel="alternate" type="text/html" title="Notes on ffmpeg" /><published>2022-02-03T10:06:32+08:00</published><updated>2022-02-03T10:06:32+08:00</updated><id>http://localhost:4000/jekyll/update/2022/02/03/notes-on-ffmpeg</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/02/03/notes-on-ffmpeg.html">&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ffmpeg documentation: &lt;a href=&quot;https://www.ffmpeg.org/documentation.html&quot;&gt;https://www.ffmpeg.org/documentation.html&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Several tutorials&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://ostechnix.com/20-ffmpeg-commands-beginners/&quot;&gt;https://ostechnix.com/20-ffmpeg-commands-beginners/&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html&quot;&gt;https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.zl-asica.com/2020/ffmpeg/&quot;&gt;https://www.zl-asica.com/2020/ffmpeg/&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;crop-image-size-in-a-video&quot;&gt;Crop image size in a video&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; input.mp4  &lt;span class=&quot;nt&quot;&gt;-filter&lt;/span&gt;:v &lt;span class=&quot;s2&quot;&gt;&quot;crop=640:480:200:150&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; error output.mp4
&lt;span class=&quot;c&quot;&gt;# -filter:v mean a filter is applied to the video stream. crop=640:480:200:150 means crop a rect of size w:h:x:y&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# if -y specified, overwrite existed file&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -v control the verbosity. &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# can be &quot;quiet&quot;, &quot;panic&quot;, &quot;fatal&quot;, &quot;error&quot;, &quot;warning&quot;, &quot;info&quot;, &quot;verbose&quot;, &quot;debug&quot;, &quot;trace&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;probe-format-and-realted-information-of-a-video&quot;&gt;Probe format and realted information of a video&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffprobe input.mp4 &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; info &lt;span class=&quot;nt&quot;&gt;-hide_banner&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -hide_banner: not print version and configuration of ffprobe&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Show duration:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffprobe &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; error &lt;span class=&quot;nt&quot;&gt;-show_entries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;duration &lt;span class=&quot;nt&quot;&gt;-of&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;noprint_wrappers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1:nokey&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 input.mp4
&lt;span class=&quot;c&quot;&gt;# -show_entries entry_list  show a set of specified entries&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -of format alias for -print_format format, &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# set the output printing format default, compact, csv, flat, ini, json, xml&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Show number of stream&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffprobe &lt;span class=&quot;nt&quot;&gt;-show_entries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nb_streams &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;-of&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;compact&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0:nk&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 input.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;Show bitrate:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# for video, 0 is index of the stream&lt;/span&gt;
ffprobe  &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; error &lt;span class=&quot;nt&quot;&gt;-select_streams&lt;/span&gt; v:0 &lt;span class=&quot;nt&quot;&gt;-show_entries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;bit_rate &lt;span class=&quot;nt&quot;&gt;-of&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;noprint_wrappers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1:nokey&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 input.mp4
&lt;span class=&quot;c&quot;&gt;# for audio, 0 is index of the stream&lt;/span&gt;
ffprobe  &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; error &lt;span class=&quot;nt&quot;&gt;-select_streams&lt;/span&gt; a:0 &lt;span class=&quot;nt&quot;&gt;-show_entries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;bit_rate &lt;span class=&quot;nt&quot;&gt;-of&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;noprint_wrappers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1:nokey&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 input.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;A more complicated example
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# https://superuser.com/questions/891665/ffprobe-show-entries-with-an-entry-name-that-uses-a-semicolon&lt;/span&gt;
ffprobe &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; error &lt;span class=&quot;nt&quot;&gt;-show_entries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stream_tags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rotate:format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;size,duration:stream&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;codec_name,bit_rate &lt;span class=&quot;nt&quot;&gt;-of&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;noprint_wrappers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 input.mp4
&lt;span class=&quot;c&quot;&gt;# print as key value pair&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;slice-a-video&quot;&gt;Slice a video&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-ss&lt;/span&gt; 00:00:30.0 &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; input.mp4 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; copy &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 00:00:10.0 output.mp4
&lt;span class=&quot;c&quot;&gt;# -ss: start time&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -t: duration (-to also works, which accepts stop time)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;convert-mp3-to-mp4-by-adding-a-static-image&quot;&gt;Convert MP3 to MP4 by adding a static image&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-loop&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; input.jpg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; input.mp3 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;:a copy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;:v libx264 &lt;span class=&quot;nt&quot;&gt;-vf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pad=ceil(iw/2)*2:ceil(ih/2)*2&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-pix_fmt&lt;/span&gt; yuvj420p &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-shortest&lt;/span&gt; output.mp4
&lt;span class=&quot;c&quot;&gt;# -vf is an alias for -filter:v&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -vf &quot;pad=ceil(iw/2)*2:ceil(ih/2)*2&quot;: pad the image to make it dividable by 2&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -pix_fmt yuvj420p: some player can't parse the default pixcel format&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;concatenate-multiple-videos&quot;&gt;Concatenate multiple videos&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.mp3'&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;do &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;file &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; filelist.txt
ffmpeg &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; concat &lt;span class=&quot;nt&quot;&gt;-safe&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; filelist.txt &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; copy concatenated.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;extract-images-from-video&quot;&gt;Extract images from video&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;  frames
ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; input.mp4 &lt;span class=&quot;nt&quot;&gt;-vf&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;fps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 frames/out-%03d.jpg
&lt;span class=&quot;c&quot;&gt;# fps=1: extract 1 image per second&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;extract-audio-from-video&quot;&gt;Extract audio from video&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; input.mp4 &lt;span class=&quot;nt&quot;&gt;-vn&lt;/span&gt; output.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;mp4-to-gih&quot;&gt;mp4 to gih&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash &lt;/span&gt;
ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mp4&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; 5 &lt;span class=&quot;nt&quot;&gt;-vf&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;256:-1 &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mp4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%.*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;.gif
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">ffmpeg documentation: https://www.ffmpeg.org/documentation.html</summary></entry><entry><title type="html">Notes on rRNA annotation</title><link href="http://localhost:4000/jekyll/update/2022/01/25/notes-on-rRNA-annotation.html" rel="alternate" type="text/html" title="Notes on rRNA annotation" /><published>2022-01-25T15:37:11+08:00</published><updated>2022-01-25T15:37:11+08:00</updated><id>http://localhost:4000/jekyll/update/2022/01/25/notes-on-rRNA-annotation</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/01/25/notes-on-rRNA-annotation.html">&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ribosomal_RNA&quot;&gt;https://en.wikipedia.org/wiki/Ribosomal_RNA&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ribosome_biogenesis&quot;&gt;https://en.wikipedia.org/wiki/Ribosome_biogenesis&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ssu-rrna-and-lsu-rrna&quot;&gt;SSU rRNA and LSU rRNA&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/SSU_rRNA&quot;&gt;SSU rRNA&lt;/a&gt; (small subunit rRNA)
    &lt;ul&gt;
      &lt;li&gt;16S rRNA in bacteria, archea and plastid&lt;/li&gt;
      &lt;li&gt;18S rRNA in eukaryotes&lt;/li&gt;
      &lt;li&gt;12S rRNA in mitochondria&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/LSU_rRNA&quot;&gt;LSU rRNA&lt;/a&gt; (large subunit rRNA)
    &lt;ul&gt;
      &lt;li&gt;23S rRNA in bacteria, archea and plastid&lt;/li&gt;
      &lt;li&gt;5.8S &amp;amp; 28S rRNA in eukaryotes. The 5.8S rRNA is homologous to the 5’ end of non-eukaryotic LSU rRNA. In eukaryotes, the insertion of ITS2 breaks LSU rRNA into 5.8S and 28S rRNAs.&lt;/li&gt;
      &lt;li&gt;16S in Mitochondria&lt;/li&gt;
      &lt;li&gt;5S rRNA&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Biogenesis
    &lt;ul&gt;
      &lt;li&gt;In bacteria, 16S rRNA, 23S rRNA, and 5S rRNA are typically organized as a co-transcribed operon.&lt;/li&gt;
      &lt;li&gt;In eukaryotes, the 28S, 5.8S, and 18S rRNAs are encoded by a single transcription unit (45S) separated by 2 internally transcribed spacers, and transcribed by RNA polymerase I. 5S rRNA is transcribed independetly by RNA polymerase III.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;where-to-get-rrna-data&quot;&gt;Where to get rRNA data&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/tseemann/barrnap&quot;&gt;barrnap&lt;/a&gt; is widely used tool for rRNA annotation, &lt;a href=&quot;https://github.com/biocore/sortmerna/tree/master/data/rRNA_databases&quot;&gt;SortMeRNA&lt;/a&gt; is a tool to sort out rRNA from NGS data. Here list data resources used by these two tools
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/tseemann/barrnap&quot;&gt;barrnap&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/biocore/sortmerna/tree/master/data/rRNA_databases&quot;&gt;SortMeRNA&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;We can see two major sources of rRNA information come from:
    &lt;ul&gt;
      &lt;li&gt;The &lt;a href=&quot;https://www.arb-silva.de/&quot;&gt;silva&lt;/a&gt; database. Provide sequence alignments, focus on metagenomics (16S rRNA is the most wildely used marker gene in metagenomics).&lt;/li&gt;
      &lt;li&gt;Also see
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;https://greengenes.secondgenome.com/&quot;&gt;greengenes&lt;/a&gt; for 16S rRNA&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;https://rdp.cme.msu.edu/&quot;&gt;RDP&lt;/a&gt; Bacterial and Archaeal 16S rRNA sequences, and Fungal 28S rRNA&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;The &lt;a href=&quot;https://rfam.xfam.org/&quot;&gt;Rfam&lt;/a&gt; database. Provide sequence alignments, reference structure and covariance model.
        &lt;ul&gt;
          &lt;li&gt;5S and 5.8S rRNA presents in ribosome large subunit, but not included in SILVA LSU. &lt;a href=&quot;https://github.com/tseemann/barrnap&quot;&gt;barrnap&lt;/a&gt; and &lt;a href=&quot;https://github.com/biocore/sortmerna/tree/master/data/rRNA_databases&quot;&gt;SortMeRNA&lt;/a&gt; use Rfam for 5S and 5.8S rRNA annotation.&lt;/li&gt;
          &lt;li&gt;5S rRNA: RF00001&lt;/li&gt;
          &lt;li&gt;5.8S rRNA: RF00002&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;rrna-sequence-in-reference-genome-assembly&quot;&gt;rRNA sequence in reference genome assembly&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;rRNA is generally recognized as repeat sequence in eukaryotic genomes, and abscent from some genome assemblies.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Human genome
    &lt;ul&gt;
      &lt;li&gt;5S, 5.8S, 18S, 28S rRNAs are all presents in &lt;a href=&quot;http://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_38/GRCh38.primary_assembly.genome.fa.gz&quot;&gt;hg38 assembly&lt;/a&gt;.&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_38/gencode.v38.annotation.gtf.gz&quot;&gt;gencode v38 annotation&lt;/a&gt; contains two types of genomic rRNA (5S, 5.8S)and two types of mitochondrial rRNA (16S, 12S), but not genomic 16S and 28S rRNA.&lt;/li&gt;
      &lt;li&gt;refseq provides annotations for all 4 types of rRNAs, see &lt;a href=&quot;https://ftp.ncbi.nlm.nih.gov/refseq/H_sapiens/annotation/GRCh38_latest/refseq_identifiers/GRCh38_latest_genomic.gff.gz&quot;&gt;this link&lt;/a&gt;.&lt;/li&gt;
      &lt;li&gt;See discussion in here: &lt;a href=&quot;http://seqanswers.com/forums/showthread.php?t=41868&quot;&gt;http://seqanswers.com/forums/showthread.php?t=41868&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;rRNAs have considerable variation among populations
    &lt;ul&gt;
      &lt;li&gt;See 2018, &lt;em&gt;Science Advances&lt;/em&gt;, &lt;a href=&quot;https://www.science.org/doi/10.1126/sciadv.aao0665?url_ver=Z39.88-2003&amp;amp;rfr_id=ori:rid:crossref.org&amp;amp;rfr_dat=cr_pub%20%200pubmed&quot;&gt;Variant ribosomal RNA alleles are conserved and exhibit tissue-specific expression&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;Mouse rRNA prototypes
            &lt;ul&gt;
              &lt;li&gt;NR_003278.3&lt;/li&gt;
              &lt;li&gt;NR_003279.1&lt;/li&gt;
              &lt;li&gt;NR_003280.2&lt;/li&gt;
              &lt;li&gt;NR_030686.1&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Mouse rDNA prototypes
            &lt;ul&gt;
              &lt;li&gt;BK000964.3&lt;/li&gt;
              &lt;li&gt;chromosome 8 [123538334,123539354]&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Human rRNA prototypes
            &lt;ul&gt;
              &lt;li&gt;NR_003285.2&lt;/li&gt;
              &lt;li&gt;NR_003286.2&lt;/li&gt;
              &lt;li&gt;NR_003287.2&lt;/li&gt;
              &lt;li&gt;NR_023379.1&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Human rDNA prototypes
            &lt;ul&gt;
              &lt;li&gt;U13369.1&lt;/li&gt;
              &lt;li&gt;X12811.1&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">https://en.wikipedia.org/wiki/Ribosomal_RNA https://en.wikipedia.org/wiki/Ribosome_biogenesis</summary></entry><entry><title type="html">Notes on v2ray Configuration</title><link href="http://localhost:4000/jekyll/update/2022/01/16/v2ray-configuration.html" rel="alternate" type="text/html" title="Notes on v2ray Configuration" /><published>2022-01-16T10:42:56+08:00</published><updated>2022-01-16T10:42:56+08:00</updated><id>http://localhost:4000/jekyll/update/2022/01/16/v2ray-configuration</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2022/01/16/v2ray-configuration.html">&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Some notes on v2ray configuration&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Scripts for installation&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://git.io/v2ray.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;v2ray中的数据流向(摘自&lt;a href=&quot;https://toutyrater.github.io/&quot;&gt;https://toutyrater.github.io/&lt;/a&gt;)。可以看出，直接交互的是客户端的outbound和服务器的inbound。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;浏览器&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &amp;lt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;socks&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;V2Ray 客户端 inbound &amp;lt;-&amp;gt; V2Ray 客户端 outbound&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &amp;lt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;VMess&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;V2Ray 服务器 inbound &amp;lt;-&amp;gt; V2Ray 服务器 outbound&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &amp;lt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Freedom&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;目标网站&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;几种出口协议
    &lt;ul&gt;
      &lt;li&gt;VMess&lt;/li&gt;
      &lt;li&gt;shadowsocks&lt;/li&gt;
      &lt;li&gt;freedom: 直连&lt;/li&gt;
      &lt;li&gt;blackhole: 只吞入数据,相当于阻止访问&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;explaination-for-the-configuration-file&quot;&gt;Explaination for the configuration file&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;See &lt;a href=&quot;https://www.v2ray.com/en/configuration/overview.html&quot;&gt;https://www.v2ray.com/en/configuration/overview.html&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://stackoverflow.com/questions/20778771/what-is-the-difference-between-0-0-0-0-127-0-0-1-and-localhost&quot;&gt;https://stackoverflow.com/questions/20778771/what-is-the-difference-between-0-0-0-0-127-0-0-1-and-localhost&lt;/a&gt; difference between &lt;code class=&quot;highlighter-rouge&quot;&gt;0.0.0.0&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;127.0.0.1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;终端应用&quot;&gt;终端应用&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;github&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#这里的socks5://127.0.0.1:10808应当和本地v2ray配置文件的inbound一致&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; http.https://github.com.proxy socks5://127.0.0.1:10808
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;curl&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#这里的socks5h://localhost:10808应当和本地v2ray配置文件的inbound一致&lt;/span&gt;
curl &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; socks5h://localhost:10808 www.google.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;wget 默认不支持socks5代理…&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tips&quot;&gt;Tips&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;注意系统时间设置，如果VPS和本地机系统时间不一致v2ray无法正确使用&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Generate uuid in linux terminal : &lt;code class=&quot;highlighter-rouge&quot;&gt;uuidgen&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;some-useful-resources&quot;&gt;Some useful resources&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://toutyrater.github.io/&quot;&gt;https://toutyrater.github.io/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/233boy/v2ray/wiki/V2Ray%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B&quot;&gt;https://github.com/233boy/v2ray/wiki/V2Ray%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/v2fly/v2ray-examples&quot;&gt;https://github.com/v2fly/v2ray-examples&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">Some notes on v2ray configuration</summary></entry></feed>